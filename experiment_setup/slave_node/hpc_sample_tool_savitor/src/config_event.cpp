#include "../include/stdafx.h"

void profile::config_events(unsigned int event_count)
{
	
	for (unsigned int i = 0; i < event_count; i++)
	{
		error_log = fnSetCountingEvent(Core, i , pEventConfig[i]);
		if (error_log != S_OK)
		{
			std::cout << "Event " << (i + 1) << " entered on the command line could not be set" << std::endl
				 << "Event Details: "     << std::endl
				 << "Event Number: "      << pEventConfig[i].performanceEvent << std::endl
                 << "Event Counter: "     << pEventConfig[i].eventCounter	  << std::endl
				 << "Event Start Count: " << pEventConfig[i].value            << std::endl
				 << "Possible error: "    << error_decode(error_log)		  << std::endl;
			kill_profile();
		}
		else
			std::cout << "Event " << (i+1) << " succeessfully set. " << error_decode(error_log) << std::endl;
	}

	return;
}