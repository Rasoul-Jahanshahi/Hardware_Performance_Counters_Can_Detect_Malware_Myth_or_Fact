#include "../include/stdafx.h"

void profile::end_profile()
{
	
	// Stop profiling
	error_log = fnStopProfiling();
	if (error_log == S_OK)
		std::cout << "Profiling stopped: " << error_decode(error_log) << std::endl;
	else
		std::cout << "could not stop profile with possible error: " << error_decode(error_log) << std::endl;
	

	// Release Profiling Driver
	error_log = fnReleaseProfiling();
	if (error_log == S_OK)
		std::cout << "Profile Driver Realeased: " << error_decode(error_log) << std::endl;
	else
		std::cout << "Could not release profiling with possible error: " << error_decode(error_log) << std::endl;

	
	// Get the last profile error 
	error_log = fnGetLastProfileError(ErrorMsgSize, pErrorMsg);
	if (error_log == S_OK)
	{
		//std::cout << "Profile errror: " << (char*)*pErrorMsg << std::endl;
	}
	return;
}
